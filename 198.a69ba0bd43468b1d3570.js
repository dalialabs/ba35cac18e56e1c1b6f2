"use strict";(self.webpackChunkmaia_node=self.webpackChunkmaia_node||[]).push([[198],{84198:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});n(30050),n(69358),n(59749),n(38077),n(81919),n(99474),n(35082),n(40739);var o=n(70885),r=n(4942),s=n(15861),i=n(15671),a=n(43144),c=n(82963),u=n(61120),l=n(79340),f=n(64687),p=n.n(f),d=(n(34338),n(752),n(60228),n(73964),n(21694),n(76265),n(34284),n(49693),n(47522),n(36585),n(63975),n(6203),n(36409),n(45643));function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach(function(e){(0,r.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(b=function(){return!!t})()}var v=function(t){function e(t){var n,o,r,s,a=t.document,l=t.formRoot,f=t.data;return(0,i.Z)(this,e),o=this,r=e,s=[{document:a,formRoot:l,data:f}],r=(0,u.Z)(r),n=(0,c.Z)(o,b()?Reflect.construct(r,s||[],(0,u.Z)(o).constructor):r.apply(o,s)),window.__assetPathResolver=function(t){return"".concat(n.APIURL,"/js/dist/web-components/").concat(t)},n}var r;return(0,l.Z)(e,t),(0,a.Z)(e,[{key:"showUniversalSignUp",value:(r=(0,s.Z)(p().mark(function t(){var e,r,i,a=this;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.config.fetchLocationFromIpApi.active){t.next=13;break}if(this.locationBasedOnIP){t.next=5;break}return t.next=4,d.default.fetchLocationFromIpApi(this.getOrigin(),this.config.fetchLocationFromIpApi.ipLookupUrls);case 4:this.locationBasedOnIP=t.sent;case 5:if(t.t0=!this.byPassCountryCheck,!t.t0){t.next=10;break}return t.next=9,d.default.shouldBlockByCountry({location:this.locationBasedOnIP,blockLoadByCountry:this.config.blockLoadByCountry});case 9:t.t0=t.sent;case 10:if(!t.t0){t.next=13;break}return t.abrupt("return");case 13:return t.next=15,n.e(623).then(n.t.bind(n,7623,23));case 15:this.universalSignup=document.createElement("universal-signup"),r=m({apiUrl:this.APIURL,clientName:null===(e=this.formModel)||void 0===e||null===(e=e.Client)||void 0===e?void 0:e.name},this.config),i={onRequestCode:function(){var t=(0,s.Z)(p().mark(function t(e,n){return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.fetch("".concat(a.APIURL,"/users/universal-send-verification-code"),{method:"POST",body:JSON.stringify({phone:e,method:n}),headers:{"Content-Type":"application/json;charset=utf-8"}}).catch(function(t){console.log("Failed to request code",t)});case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),onVerifyCode:function(){var t=(0,s.Z)(p().mark(function t(e,n,o){return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.fetch("".concat(a.APIURL,"/users/universal-validate-verification-code"),{method:"POST",body:JSON.stringify({phone:e,method:n,code:o}),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(t){return t.json()}).then(function(t){var e,n,o=t.user;return null!=o&&(o.job_title={title:null!==(e=null===(n=o.ClientsUsers)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.job_title)&&void 0!==e?e:o.job_title},o.location=m({},o.Location)),m(m({},t),{},{user:o})}).catch(function(t){return console.log("Failed to request code",t),{success:!1,message:"Failed to request code"}}));case 1:case"end":return t.stop()}},t)}));return function(e,n,o){return t.apply(this,arguments)}}(),onSignup:function(){var t=(0,s.Z)(p().mark(function t(e){var n,r;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new FormData,[e,e.location].forEach(function(t){Object.entries(t).forEach(function(t){var e=(0,o.Z)(t,2),r=e[0],s=e[1];n.set("user[".concat(r,"]"),s)})}),r=Array.isArray(e.job_title)?e.job_title(function(t){return t.title}).join(","):e.job_title.title,n.set("user[job_title]",r),n.set("user[location]",e.location.address),a.formValues.forceICIMS&&n.set("forceICIMS",a.formValues.forceICIMS),n.set("client_id",a.formModel.client_id),n.set("client_job_url",a.document.location.href),n.set("form_id",a.formModel.id),a.locationBasedOnIP&&n.set("user[location_based_on_ip]",JSON.stringify(a.locationBasedOnIP)),a.submissionData=e,t.abrupt("return",window.fetch("".concat(a.config.submitEndPoint),{method:"POST",body:n}).then(function(t){return t.json()}).then(function(t){var e;return console.info("Form submitted successfully:",t),a.saveDataAfterSubmit(t),a.trackSubmitSuccess(),{success:!0,message:"Registration successful",postSignupJobs:null===(e=t.clientJobs)||void 0===e?void 0:e.jobs}}).catch(function(t){return console.error("Failed to submit form:",t),a.trackSubmitError(t),{success:!1,message:"Failed to submit registration form"}}).finally(function(){a.formSubmitted=!0}));case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),onStartApply:function(){var t=(0,s.Z)(p().mark(function t(e){var n,o,r,s,i,c,u,l;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.getEApplyDataForJob(e,"form");case 3:if(s=t.sent,c=(i=s||{}).token,u=i.applyApplication,c){t.next=9;break}return a.data.eapplyFormOptions=null,t.next=9,a.saveData(a.demoMode);case 9:return l=e.location||"".concat(null===(n=e.addresses)||void 0===n?void 0:n[0].city,", ").concat(null===(o=e.addresses)||void 0===o?void 0:o[0].state),t.abrupt("return",{success:null!=c,message:"Apply started",eApplyData:s,applyComponentOptions:{customCss:"".concat(a.APIURL,"/css/apply-form.css"),customCssPath:"".concat(a.APIURL,"/css/apply-form-universal.css"),userName:a.data.userName,token:c,title:e.title,location:l,entity_name:e.entity_name,baseUrl:a.APIURL,source:"form",job:m(m({},e),{},{location:l}),appStatus:null==u?void 0:u.status,showJobDetails:null===(r=a.config.eapply)||void 0===r?void 0:r.showJobDetails}});case 13:return t.prev=13,t.t0=t.catch(0),t.abrupt("return",{success:!1,message:"Failed to start apply"});case 16:case"end":return t.stop()}},t,null,[[0,13]])}));return function(e){return t.apply(this,arguments)}}()},this.universalSignup.layout=this.formModel.layout,this.universalSignup.config=r,this.universalSignup.callbacks=i,this.formRoot.appendChild(this.universalSignup),this.formsEvent.track("form_load");case 23:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})}]),e}(n(53334).default)}}]);