"use strict";(self.webpackChunkmaia_node=self.webpackChunkmaia_node||[]).push([[263],{61263:(e,n,t)=>{t.r(n),t.d(n,{default:()=>y});t(89730),t(30024),t(12826),t(77049),t(21694),t(64043),t(59749),t(86544),t(84254),t(752),t(76265),t(63975),t(69358),t(38077),t(81919),t(99474),t(35082),t(40739);var r=t(4942),a=t(15861),i=t(15671),o=t(43144),u=(t(49693),t(60228),t(47522),t(73964),t(34338),t(34284),t(76801),t(43843),t(64687)),c=t.n(u);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function p(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var f=0,v=1,b=2,y=function(){function e(n){(0,i.Z)(this,e),this.form=n}var n,t;return(0,o.Z)(e,[{key:"init",value:(t=(0,a.Z)(c().mark(function e(){var n,t,r,a,i=this;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.render();case 2:n=window.location.href,t=function(){var e=window.location.href;e===n||i.isInit||(n=e,i.render())},window.addEventListener("popstate",t),r=window.history.pushState,window.history.pushState=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];r.apply(window.history,n),t()},a=window.history.replaceState,window.history.replaceState=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];a.apply(window.history,n),t()};case 9:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"render",value:(n=(0,a.Z)(c().mark(function e(){var n,t,r,i,o,u,l,d,y,h,m,g,w,S,x,k,j,A,O,I,D,P,T,C,E,_,L,Z,U,M,N,J,B,R,F,G,W,q,z,H,Y,$,K,Q,V,X,ee=this;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.form,e.prev=1,r=null!==(t=n.config)&&void 0!==t?t:{},i=r.applyWithDaliaButton,o=void 0===i?{}:i){e.next=5;break}return e.abrupt("return");case 5:if(u=o.enabled,l=void 0!==u&&u,d=o.urlPatterns,y=void 0===d?[]:d,h=o.jobIdGetterLogic,m=void 0===h?"":h,g=o.jobSourceId,w=void 0===g?"":g,S=o.applyButtonSelector,x=void 0===S?"":S,k=o.buttonAlreadyAppliedText,j=void 0===k?"You've already applied":k,A=o.buttonAppliedText,O=void 0===A?"Applied":A,I=o.buttonContinueApplyText,D=void 0===I?"Continue Applying":I,P=o.applyComponentCssStyle,T=void 0===P?"":P,C=o.allowDefaultButtonAction,E=void 0!==C&&C,l){e.next=8;break}return e.abrupt("return");case 8:_=!1,L=p(y),e.prev=10,L.s();case 12:if((Z=L.n()).done){e.next=19;break}if(U=Z.value,!window.location.href.includes(U)){e.next=17;break}return _=!0,e.abrupt("break",19);case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),L.e(e.t0);case 24:return e.prev=24,L.f(),e.finish(24);case 27:if(window.DaliaNS&&_){e.next=29;break}return e.abrupt("return");case 29:if(window.DaliaNS.getJobId){e.next=40;break}e.prev=30,(M=n.document.createElement("script")).innerHTML="\n             window.DaliaNS.getJobId = () => {\n              const jobId = ".concat(m,";\n              return jobId\n             }\n          "),n.document.body.appendChild(M),e.next=40;break;case 36:return e.prev=36,e.t1=e.catch(30),console.error("Failed to load job id getter script",e.t1),e.abrupt("return");case 40:return R=function(e){N&&(ee.form.data["dalia_applied_".concat(N)]=e,ee.form.saveData())},F=function(){R(f),H({text:D,disabled:!1})},G=function(e){R(v),H({text:e?O:j})},W=function(){R(b),H({text:"Failed To Apply",disabled:!1})},q=function(){return n.data.userId},z=function(){return ee.form.data["dalia_applied_".concat(N)]},H=function(e){var n=e.text,t=e.disabled,r=void 0===t||t;document.querySelectorAll(x).forEach(function(e){e.innerText=n,e.disabled=r,r&&(e.style.pointerEvents="none")})},Y=function(){return z()===v},$=function(){return z()===f},K=function(){var e=(0,a.Z)(c().mark(function e(){var t,r,a,i;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",(i=n.formModel.client_id)&&(a="c".concat(i)),N=null===(t=(r=window.DaliaNS).getJobId)||void 0===t?void 0:t.call(r)){e.next=6;break}return e.abrupt("return");case 6:if(B=q(),!Y()){e.next=12;break}return G(),e.abrupt("return");case 12:$()&&F();case 13:return e.next=15,window.fetch(n.APIURL+"/api/v2/jobs/getExternal/".concat(N,"?e=").concat(a,"&sid=").concat(w),{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8","x-api-token":n.formData.token}}).then(function(e){var n;return null==e||null===(n=e.json)||void 0===n?void 0:n.call(e)}).catch(n.d);case 15:J=e.sent;case 16:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=52,K();case 52:if(J){e.next=54;break}return e.abrupt("return");case 54:n.d("Loading Apply With Dalia Button..."),this.isInit=!0,Q=function(){var e=(0,a.Z)(c().mark(function e(){var t,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ee.isUniversalScriptLoaded){e.next=4;break}return e.next=3,ee.form.loadUniversalScript();case 3:ee.isUniversalScriptLoaded=!0;case 4:ee.universalSignup=n.document.createElement("universal-signup"),X=!1,r=s({apiUrl:ee.form.APIURL,clientName:null===(t=ee.form.formModel)||void 0===t||null===(t=t.Client)||void 0===t?void 0:t.name},ee.form.config),ee.universalSignup.layout=ee.form.formModel.layout,ee.universalSignup.layout.stages.mfa=s(s({},ee.universalSignup.layout.stages.mfa),{},{welcomeTitle:"",welcomeSubtitle:"Please enter your mobile number to apply faster"}),ee.universalSignup.layout.general.styleOverride=T,ee.universalSignup.config=r,ee.universalSignup.callbacks=s(s({},n.callbacks),{},{onSignup:function(){var e=(0,a.Z)(c().mark(function e(t){var r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.callbacks.onSignup(t);case 2:return(r=e.sent).success&&ee.form.universalSignup&&(B=q(),ee.form.universalSignup.remove()),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),onStartApply:function(){var e=(0,a.Z)(c().mark(function e(t){var r,a,i,o,u;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.callbacks.onStartApply(t);case 2:return r=e.sent,a=r.success,i=r.eApplyData,o=function(){ee.universalSignup.close(),ee.universalSignup.remove(),ee.universalSignup=null},ee.universalSignup&&(a?"submitted"===(null==i||null===(u=i.applyApplication)||void 0===u?void 0:u.status)?(G(),o()):F():(W(),o())),e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),applyFinished:function(e){var n=e.eventType;ee.universalSignup.toggleOpen(),"submitted"===n&&(G(!0),ee.universalSignup.remove(),ee.universalSignup=null)}}),ee.universalSignup.externalApplyJob=J,ee.universalSignup.isOpen=!0,ee.universalSignup.noMinimizeUi=!0,ee.universalSignup.applyOnly=null!=B,ee.universalSignup.addEventListener("toggleOpen",function(e){ee.form.universalSignup&&(ee.form.universalSignup.disabled=e.detail.isOpen)}),ee.form.universalSignup&&(ee.form.universalSignup.disabled=!0),ee.form.formRoot.appendChild(ee.universalSignup);case 19:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,a.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y()){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,e.next=5,window.fetch(n.APIURL+"/api/v2/eapply/user-applied-before",{method:"POST",body:JSON.stringify({userId:B,jobId:N,clientId:n.formModel.client_id}),headers:{"Content-Type":"application/json;charset=utf-8","x-api-token":n.formData.token}}).then(function(e){return e.json()}).then(function(e){var n=e.alreadyApplied;return!0===n&&G(),n});case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),n.d(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(){return e.apply(this,arguments)}}(),X=!1,n.document.addEventListener("click",function(){var e=(0,a.Z)(c().mark(function e(t){var r,a,i,o,u,l;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:if(!(r=t.target.closest(x))){e.next=27;break}if(E||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),!X&&!r.disabled){e.next=7;break}return e.abrupt("return");case 7:if(l=N===(null===(a=(i=window.DaliaNS).getJobId)||void 0===a?void 0:a.call(i)),N=null===(o=(u=window.DaliaNS).getJobId)||void 0===o?void 0:o.call(u),!B||!N){e.next=15;break}return e.next=12,V();case 12:if(!e.sent){e.next=15;break}return H({text:j}),e.abrupt("return");case 15:if(!ee.universalSignup||!l){e.next=18;break}return ee.universalSignup.open(),e.abrupt("return");case 18:return X=!0,n.formsEvent.track("apply_with_dalia_button_click",{params:{jobId:N,userId:B,clientId:n.formModel.client_id}}),t.target.innerText="Checking job details...",ee.universalSignup&&(ee.universalSignup.remove(),ee.universalSignup=null),e.next=24,K();case 24:Q(),X=!1,F();case 27:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),!0),e.next=65;break;case 62:e.prev=62,e.t2=e.catch(1),n.d(e.t2);case 65:case"end":return e.stop()}},e,this,[[1,62],[10,21,24,27],[30,36]])})),function(){return n.apply(this,arguments)})}]),e}()}}]);