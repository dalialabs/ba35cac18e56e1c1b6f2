"use strict";(self.webpackChunkmaia_node=self.webpackChunkmaia_node||[]).push([[359],{16359:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});n(52675),n(2008),n(67945),n(84185),n(83851),n(81278),n(79432),n(60825);var o=n(80296),r=n(64467),s=n(10467),i=n(23029),a=n(92901),c=n(50388),u=n(53954),l=n(15361),f=n(54756),p=n.n(f),d=(n(28706),n(51629),n(64346),n(23792),n(48598),n(60739),n(62010),n(5506),n(26099),n(3362),n(9391),n(47764),n(23500),n(62953),n(58446));function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach(function(e){(0,r.A)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(b=function(){return!!t})()}var v=function(t){function e(t){var n,o,r,s,a=t.document,l=t.formRoot,f=t.data;return(0,i.A)(this,e),o=this,r=e,s=[{document:a,formRoot:l,data:f}],r=(0,u.A)(r),n=(0,c.A)(o,b()?Reflect.construct(r,s||[],(0,u.A)(o).constructor):r.apply(o,s)),window.__assetPathResolver=function(t){return"".concat(n.APIURL,"/js/dist/web-components/").concat(t)},n}return(0,l.A)(e,t),(0,a.A)(e,[{key:"showUniversalSignUp",value:(r=(0,s.A)(p().mark(function t(){var e,r,i,a,c=this;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.config.fetchLocationFromIpApi.active){t.next=5;break}if(this.locationBasedOnIP){t.next=2;break}return t.next=1,d.default.fetchLocationFromIpApi(this.getOrigin(),this.config.fetchLocationFromIpApi.ipLookupUrls);case 1:this.locationBasedOnIP=t.sent;case 2:if(!(a=!this.byPassCountryCheck)){t.next=4;break}return t.next=3,d.default.shouldBlockByCountry({location:this.locationBasedOnIP,blockLoadByCountry:this.config.blockLoadByCountry});case 3:a=t.sent;case 4:if(!a){t.next=5;break}return t.abrupt("return");case 5:return t.next=6,n.e(337).then(n.t.bind(n,29337,23));case 6:this.universalSignup=document.createElement("universal-signup"),r=m({apiUrl:this.APIURL,clientName:null===(e=this.formModel)||void 0===e||null===(e=e.Client)||void 0===e?void 0:e.name},this.config),i={onRequestCode:function(){var t=(0,s.A)(p().mark(function t(e,n){return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,window.fetch("".concat(c.APIURL,"/users/universal-send-verification-code"),{method:"POST",body:JSON.stringify({phone:e,method:n}),headers:{"Content-Type":"application/json;charset=utf-8"}}).catch(function(t){console.log("Failed to request code",t)});case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),onVerifyCode:function(){var t=(0,s.A)(p().mark(function t(e,n,o){return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.fetch("".concat(c.APIURL,"/users/universal-validate-verification-code"),{method:"POST",body:JSON.stringify({phone:e,method:n,code:o}),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(t){return t.json()}).then(function(t){var e,n,o=t.user;return null!=o&&(o.job_title={title:null!==(e=null===(n=o.ClientsUsers)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.job_title)&&void 0!==e?e:o.job_title},o.location=m({},o.Location)),m(m({},t),{},{user:o})}).catch(function(t){return console.log("Failed to request code",t),{success:!1,message:"Failed to request code"}}));case 1:case"end":return t.stop()}},t)}));return function(e,n,o){return t.apply(this,arguments)}}(),onSignup:function(){var t=(0,s.A)(p().mark(function t(e){var n,r;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new FormData,[e,e.location].forEach(function(t){Object.entries(t).forEach(function(t){var e=(0,o.A)(t,2),r=e[0],s=e[1];n.set("user[".concat(r,"]"),s)})}),r=Array.isArray(e.job_title)?e.job_title(function(t){return t.title}).join(","):e.job_title.title,n.set("user[job_title]",r),n.set("user[location]",e.location.address),c.formValues.forceICIMS&&n.set("forceICIMS",c.formValues.forceICIMS),n.set("client_id",c.formModel.client_id),n.set("client_job_url",c.document.location.href),n.set("form_id",c.formModel.id),c.locationBasedOnIP&&n.set("user[location_based_on_ip]",JSON.stringify(c.locationBasedOnIP)),c.submissionData=e,t.abrupt("return",window.fetch("".concat(c.config.submitEndPoint),{method:"POST",body:n}).then(function(t){return t.json()}).then(function(t){var e;return console.info("Form submitted successfully:",t),c.saveDataAfterSubmit(t),c.trackSubmitSuccess(),{success:!0,message:"Registration successful",postSignupJobs:null===(e=t.clientJobs)||void 0===e?void 0:e.jobs}}).catch(function(t){return console.error("Failed to submit form:",t),c.trackSubmitError(t),{success:!1,message:"Failed to submit registration form"}}).finally(function(){c.formSubmitted=!0}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),onStartApply:function(){var t=(0,s.A)(p().mark(function t(e){var n,o,r,s,i,a,u,l;return p().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=1,c.getEApplyDataForJob(e,"form");case 1:if(s=t.sent,a=(i=s||{}).token,u=i.applyApplication,a){t.next=2;break}return c.data.eapplyFormOptions=null,t.next=2,c.saveData(c.demoMode);case 2:return l=e.location||"".concat(null===(n=e.addresses)||void 0===n?void 0:n[0].city,", ").concat(null===(o=e.addresses)||void 0===o?void 0:o[0].state),t.abrupt("return",{success:null!=a,message:"Apply started",eApplyData:s,applyComponentOptions:{customCss:"".concat(c.APIURL,"/css/apply-form.css"),customCssPath:"".concat(c.APIURL,"/css/apply-form-universal.css"),userName:c.data.userName,token:a,title:e.title,location:l,entity_name:e.entity_name,baseUrl:c.APIURL,source:"form",job:m(m({},e),{},{location:l}),appStatus:null==u?void 0:u.status,showJobDetails:null===(r=c.config.eapply)||void 0===r?void 0:r.showJobDetails}});case 3:return t.prev=3,t.catch(0),t.abrupt("return",{success:!1,message:"Failed to start apply"});case 4:case"end":return t.stop()}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}()},this.universalSignup.layout=this.formModel.layout,this.universalSignup.config=r,this.universalSignup.callbacks=i,this.formRoot.appendChild(this.universalSignup),this.formsEvent.track("form_load");case 7:case"end":return t.stop()}},t,this)})),function(){return r.apply(this,arguments)})}]);var r}(n(21372).default)}}]);