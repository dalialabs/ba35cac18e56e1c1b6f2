"use strict";(self.webpackChunkmaia_node=self.webpackChunkmaia_node||[]).push([[198],{84198:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});n(30050),n(59749),n(38077),n(81919),n(99474),n(35082),n(40739);var o=n(71002),r=n(70885),s=n(4942),i=n(15861),a=n(15671),u=n(43144),c=n(82963),l=n(61120),p=n(79340),d=n(64687),f=n.n(d);n(34338),n(60228),n(73964),n(30024),n(49693),n(47522),n(36585),n(63975),n(6203),n(50886),n(36409),n(752),n(76265),n(278),n(69358),n(21694),n(34284);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}var b=function(e){function t(e){var n,s,u,p,d,m,b,y,g,_=e.document,S=e.formRoot,j=e.data;return(0,a.Z)(this,t),s=this,u=t,p=[{document:_,formRoot:S,data:j}],u=(0,l.Z)(u),(n=(0,c.Z)(s,h()?Reflect.construct(u,p||[],(0,l.Z)(s).constructor):u.apply(s,p))).assetVersion=j.assetVersion||"",window.__assetPathResolver=function(e){return"".concat(n.APIURL,"/js/dist/web-components/").concat(e)},n.isExistingUser=!1,n.callbacks={onRequestCode:(g=(0,i.Z)(f().mark(function e(t,o){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch("".concat(n.APIURL,"/users/universal-send-verification-code"),{method:"POST",body:JSON.stringify({phone:t,method:o}),headers:{"Content-Type":"application/json;charset=utf-8"}}).catch(function(e){console.log("Failed to request code",e)});case 2:case"end":return e.stop()}},e)})),function(e,t){return g.apply(this,arguments)}),onPhoneEntered:function(e){null!==n.previousPhoneNumber&&n.previousPhoneNumber!==e?n.formsEvent.track("form_phone_changed",{}):n.formsEvent.track("form_phone_entered",{}),n.previousPhoneNumber=e,n.hasEnteredPhone=!0},onVerifyCode:(y=(0,i.Z)(f().mark(function e(t,o,r){var s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.formModel.client_id,e.abrupt("return",window.fetch("".concat(n.APIURL,"/users/universal-validate-verification-code"),{method:"POST",body:JSON.stringify({phone:t,method:o,code:r,clientId:s}),headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(e){return e.json()}).then(function(e){var t=e.user;if(e.success){var r=null!=t?"existing":"new";n.formsEvent.track("form_2FAauth_pass",{params:{method:o,user_status:r}}),n.isExistingUser=null!=t}else{var s={method:o};null!=t&&(s.user_status="existing"),n.formsEvent.track("form_2FAauth_fail",{params:s})}if(null!=t){var i,a,u=null!==(i=null===(a=t.ClientsUsers)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.job_title)&&void 0!==i?i:t.job_title;t.job_title={title:u,value:u,label:u},t.location=v({},t.Location),n.data.user=t}return v(v({},e),{},{user:t})}).catch(function(e){return console.log("Failed to request code",e),n.formsEvent.track("form_2FAauth_fail",{params:{method:o,error:e.message}}),{success:!1,message:"Failed to request code"}}));case 2:case"end":return e.stop()}},e)})),function(e,t,n){return y.apply(this,arguments)}),onSignup:(b=(0,i.Z)(f().mark(function e(t){var s,i,a,u,c,l,p,d,m,h,b,y,g,_,S,j;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=new FormData,n.config.phoneNumberOnlyForm&&!t.email&&(t.email="phone_only_do_not_email+".concat((new Date).getTime(),"@dalia.co")),Object.entries(t).forEach(function(e){var t=(0,r.Z)(e,2),n=t[0],s=t[1];"location"!==n&&"job_title"!==n&&(s instanceof File?d.append("user[".concat(n,"]"),s):"object"===(0,o.Z)(s)&&null!==s?d.append("user[".concat(n,"]"),JSON.stringify(s)):d.append("user[".concat(n,"]"),s))}),t.location&&Object.entries(t.location).forEach(function(e){var t=(0,r.Z)(e,2),n=t[0],s=t[1];s instanceof File?d.append("user[".concat(n,"]"),s):"object"===(0,o.Z)(s)&&null!==s?d.append("user[".concat(n,"]"),JSON.stringify(s)):d.append("user[".concat(n,"]"),s)}),m=Array.isArray(t.job_title)?t.job_title.map(function(e){return e.value}).join(","):(null===(s=t.job_title)||void 0===s?void 0:s.value)||"",d.set("user[job_title]",m),null!==(i=t.location)&&void 0!==i&&i.address&&d.set("user[location]",t.location.address),n.formValues.forceICIMS&&d.set("forceICIMS",n.formValues.forceICIMS),d.set("client_id",n.formModel.client_id),d.set("client_job_url",n.document.location.href),d.set("form_id",n.formModel.id),d.delete("user[id]"),h=v(v(v({},t),t.location),{},{job_title:m}),b=n.getFilteredPostSignupQuestions(h).length>0,null!==(a=n.config.screeningOut)&&void 0!==a&&a.enabled&&b&&d.append("disable_client_jobs",!0),d.append("isScreenedOut",n.shouldScreenOutByDefault(null,h)),n.locationBasedOnIP&&d.set("user[location_based_on_ip]",JSON.stringify(n.locationBasedOnIP)),n.formValues.resume instanceof File&&d.append("user[resume]",n.formValues.resume),n.submissionData=t,y=n.data.user||null,g=(null==y||null===(u=y.job_title)||void 0===u?void 0:u.title)||"",_=(null==y||null===(c=y.location)||void 0===c?void 0:c.address)||"",S=(null===(l=t.job_title)||void 0===l?void 0:l.title)||"",j=(null===(p=t.location)||void 0===p?void 0:p.address)||"",e.abrupt("return",window.fetch("".concat(n.config.submitEndPoint),{method:"POST",body:d}).then(function(e){return e.json()}).then(function(e){var o;console.info("Form submitted successfully:",e),n.saveDataAfterSubmit(e);var r="no",s="no";y&&(r=g&&S&&g!==S?"yes":"no",s=_&&j&&_!==j?"yes":"no"),n.trackSubmitSuccess(),n.formsEvent.track("form_jobtitle_status",{params:{jobtitle_updated:r}}),n.formsEvent.track("form_location_status",{params:{location_updated:s}});var i={first_name:null==t?void 0:t.first_name,last_name:null==t?void 0:t.last_name,email:null==t?void 0:t.email,phone:null==t?void 0:t.phone};return{success:!0,message:"Registration successful",postSignupJobs:null===(o=e.clientJobs)||void 0===o?void 0:o.jobs,user:i}}).catch(function(e){return console.error("Failed to submit form:",e),n.trackSubmitError(e),{success:!1,message:"Failed to submit registration form"}}).finally(function(){n.formSubmitted=!0}));case 25:case"end":return e.stop()}},e)})),function(e){return b.apply(this,arguments)}),onStartApply:(m=(0,i.Z)(f().mark(function e(t){var o,r,s,i,a,u,c,l;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getEApplyDataForJob(t,"form");case 3:if(i=e.sent,u=(a=i||{}).token,c=a.applyApplication,u){e.next=9;break}return n.data.eapplyFormOptions=null,e.next=9,n.saveData(n.demoMode);case 9:return l=t.location||"".concat(null===(o=t.addresses)||void 0===o?void 0:o[0].city,", ").concat(null===(r=t.addresses)||void 0===r?void 0:r[0].state),e.abrupt("return",{success:null!=u,message:"Apply started",eApplyData:i,applyComponentOptions:{customCss:"".concat(n.APIURL,"/css/apply-form.css").concat(n.assetVersion?"?v=".concat(n.assetVersion):""),customCssPath:"".concat(n.APIURL,"/css/apply-form-universal.css").concat(n.assetVersion?"?v=".concat(n.assetVersion):""),userName:n.data.userName,token:u,title:t.title,location:l,entity_name:t.entity_name,baseUrl:n.APIURL,source:"form",job:v(v({},t),{},{location:l}),appStatus:null==c?void 0:c.status,showJobDetails:null===(s=n.config.eapply)||void 0===s?void 0:s.showJobDetails}});case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",{success:!1,message:"Failed to start apply"});case 16:case"end":return e.stop()}},e,null,[[0,13]])})),function(e){return m.apply(this,arguments)}),onTrackEvent:function(e,t){n.formsEvent.track(e,t)},getPostSignupQuestions:function(e){var t,o=Array.isArray(e.job_title)?e.job_title.map(function(e){return e.value}).join(","):(null===(t=e.job_title)||void 0===t?void 0:t.value)||"";return n.getFilteredPostSignupQuestions(v(v({},e),{},{job_title:o})).map(function(e){var t,n=v(v({},e),{},{component:e.component||e.type,choices:e.values||[],required:!0});"select"===e.type&&(n.choices=(null===(t=e.data)||void 0===t?void 0:t.values.map(function(e){return{name:e.label,value:e.value}}))||[]);return n})},onPostSignupQuestionsSubmit:(d=(0,i.Z)(f().mark(function e(t){var o,r,s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.keys(t).reduce(function(e,n){if(null!=t[n]&&Array.isArray(t[n])){var o={};return t[n].forEach(function(e){o[e]=!0}),e[n]=o,e}return e[n]=t[n],e},{}),e.next=3,n.submitPostSignupQuestions(r);case 3:if((s=e.sent).ok){e.next=6;break}return e.abrupt("return",{success:!1});case 6:return e.abrupt("return",v(v({success:!0},s),{},{postSignupJobs:null===(o=s.clientJobs)||void 0===o?void 0:o.jobs}));case 7:case"end":return e.stop()}},e)})),function(e){return d.apply(this,arguments)})},n}var s,d,m;return(0,p.Z)(t,e),(0,u.Z)(t,[{key:"showUniversalSignUp",value:(m=(0,i.Z)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.universalSignup){e.next=4;break}return this.universalSignup.open(),this.universalSignup.noMinimizeUi=!this.config.buttonEnabled,e.abrupt("return");case 4:this.loadUniversalSignUpForm(!0);case 5:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"loadUniversalScript",value:(d=(0,i.Z)(f().mark(function e(){return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(623).then(n.bind(n,7623));case 2:case"end":return e.stop()}},e)})),function(){return d.apply(this,arguments)})},{key:"loadUniversalSignUpForm",value:(s=(0,i.Z)(f().mark(function e(t){var n,o,r=this;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.hideLegacyForm(),e.next=3,this.loadUniversalScript();case 3:this.loadCustomCssIntoHost(),this.universalSignup=document.createElement("universal-signup"),this.universalSignup.lastMouseTrigger=this.data.lastMouseTrigger||0,o=v({apiUrl:this.APIURL,clientName:null===(n=this.formModel)||void 0===n||null===(n=n.Client)||void 0===n?void 0:n.name},this.config),this.universalSignup.layout=this.formModel.layout,this.universalSignup.config=o,this.universalSignup.callbacks=this.callbacks,this.universalSignup.noMinimizeUi=!this.config.buttonEnabledAlways,this.universalSignup.isOpen=t,this.formRoot.appendChild(this.universalSignup),this.universalSignup.addEventListener("toggleOpen",function(e){e.detail.isOpen?r.formsEvent.track("form_load"):(r.data.lastMouseTrigger=r.getTime(),r.saveData(r.demoMode),r.trackHideFormEvents())}),t&&this.formsEvent.track("form_load");case 15:case"end":return e.stop()}},e,this)})),function(e){return s.apply(this,arguments)})},{key:"hideLegacyForm",value:function(){this.formNode.style.setProperty("display","none","important"),this.buttonNode.style.setProperty("display","none","important")}}]),t}(n(53334).default)}}]);