"use strict";(self.webpackChunkmaia_node=self.webpackChunkmaia_node||[]).push([[263],{61263:(e,n,t)=>{t.r(n),t.d(n,{default:()=>f});t(89730),t(30024),t(12826),t(77049),t(21694),t(64043),t(59749),t(86544),t(84254),t(752),t(76265),t(63975),t(69358),t(38077),t(81919),t(49693),t(47522),t(99474),t(35082),t(40739);var r=t(4942),a=t(15861),i=t(15671),o=t(43144),u=(t(60228),t(73964),t(34338),t(34284),t(76801),t(43843),t(64687)),c=t.n(u);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach(function(n){(0,r.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function p(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw i}}}}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var f=function(){function e(n){(0,i.Z)(this,e),this.form=n}var n,t;return(0,o.Z)(e,[{key:"init",value:(t=(0,a.Z)(c().mark(function e(){var n,t,r,a,i=this;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.render();case 2:n=window.location.href,t=function(){var e=window.location.href;e===n||i.isInit||(n=e,i.render())},window.addEventListener("popstate",t),r=window.history.pushState,window.history.pushState=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];r.apply(window.history,n),t()},a=window.history.replaceState,window.history.replaceState=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];a.apply(window.history,n),t()};case 9:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"render",value:(n=(0,a.Z)(c().mark(function e(){var n,t,r,i,o,u,l,d,f,v,b,y,h,m,g,w,S,x,k,O,j,I,A,D,P,T,_,C,E,L,Z,U,M,N,J,B,R,F,G,W,z,H=this;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.form,e.prev=1,r=null!==(t=n.config)&&void 0!==t?t:{},i=r.applyWithDaliaButton,o=void 0===i?{}:i){e.next=5;break}return e.abrupt("return");case 5:if(u=o.enabled,l=void 0!==u&&u,d=o.urlPatterns,f=void 0===d?[]:d,v=o.jobIdGetterLogic,b=void 0===v?"":v,y=o.jobSourceId,h=void 0===y?"":y,m=o.applyButtonSelector,g=void 0===m?"":m,w=o.buttonAlreadyAppliedText,S=void 0===w?"You've already applied":w,x=o.buttonAppliedText,k=void 0===x?"Applied":x,O=o.buttonContinueApplyText,j=void 0===O?"Continue Applying":O,I=o.applyComponentCssStyle,A=void 0===I?"":I,D=o.allowDefaultButtonAction,P=void 0!==D&&D,l){e.next=8;break}return e.abrupt("return");case 8:T=!1,_=p(f),e.prev=10,_.s();case 12:if((C=_.n()).done){e.next=19;break}if(E=C.value,!window.location.href.includes(E)){e.next=17;break}return T=!0,e.abrupt("break",19);case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10),_.e(e.t0);case 24:return e.prev=24,_.f(),e.finish(24);case 27:if(window.DaliaNS&&T){e.next=29;break}return e.abrupt("return");case 29:if(window.DaliaNS.getJobId){e.next=40;break}e.prev=30,(L=n.document.createElement("script")).innerHTML="\n         window.DaliaNS.getJobId = () => {\n          const jobId = ".concat(b,";\n          return jobId\n         }\n      "),n.document.body.appendChild(L),e.next=40;break;case 36:return e.prev=36,e.t1=e.catch(30),console.error("Failed to load job id getter script",e.t1),e.abrupt("return");case 40:return M=function(){var e=(0,a.Z)(c().mark(function e(){var t,r,a,i;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",(i=n.formModel.client_id)&&(a="c".concat(i)),Z=null===(t=(r=window.DaliaNS).getJobId)||void 0===t?void 0:t.call(r)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,window.fetch(n.APIURL+"/api/v2/jobs/getExternal/".concat(Z,"?e=").concat(a,"&sid=").concat(h),{method:"GET",headers:{"Content-Type":"application/json;charset=utf-8","x-api-token":n.formData.token}}).then(function(e){var n;return null==e||null===(n=e.json)||void 0===n?void 0:n.call(e)}).catch(n.d);case 8:U=e.sent;case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=43,M();case 43:if(U){e.next=45;break}return e.abrupt("return");case 45:n.d("Loading Apply With Dalia Button..."),this.isInit=!0,B=function(){H.form.data["dalia_applied_".concat(J,"_").concat(Z)]=1,H.form.saveData(),N.innerText=k},R=function(){return n.data.userId},F=function(){var e=(0,a.Z)(c().mark(function e(){var t,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(H.isUniversalScriptLoaded){e.next=4;break}return e.next=3,H.form.loadUniversalScript();case 3:H.isUniversalScriptLoaded=!0;case 4:H.universalSignup=n.document.createElement("universal-signup"),z=!1,r=s({apiUrl:H.form.APIURL,clientName:null===(t=H.form.formModel)||void 0===t||null===(t=t.Client)||void 0===t?void 0:t.name},H.form.config),H.universalSignup.layout=H.form.formModel.layout,H.universalSignup.layout.stages.mfa=s(s({},H.universalSignup.layout.stages.mfa),{},{welcomeTitle:"",welcomeSubtitle:"Please enter your mobile number to apply faster"}),H.universalSignup.layout.general.styleOverride=A,H.universalSignup.config=r,H.universalSignup.callbacks=s(s({},n.callbacks),{},{onSignup:function(){var e=(0,a.Z)(c().mark(function e(t){var r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.callbacks.onSignup(t);case 2:return(r=e.sent).success&&H.form.universalSignup&&(J=R(),H.form.universalSignup.remove()),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),applyFinished:function(e){var n=e.eventType;H.universalSignup.toggleOpen(),"submitted"===n&&(B(),H.universalSignup.remove(),H.universalSignup=null)}}),H.universalSignup.externalApplyJob=U,H.universalSignup.isOpen=!0,H.universalSignup.noMinimizeUi=!0,H.universalSignup.applyOnly=null!=J,H.universalSignup.addEventListener("toggleOpen",function(e){H.form.universalSignup&&(H.form.universalSignup.disabled=e.detail.isOpen)}),H.form.universalSignup&&(H.form.universalSignup.disabled=!0),H.form.formRoot.appendChild(H.universalSignup);case 19:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,a.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!H.form.data["dalia_applied_".concat(J,"_").concat(Z)]){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,e.next=5,window.fetch(n.APIURL+"/api/v2/eapply/user-applied-before",{method:"POST",body:JSON.stringify({userId:J,jobId:Z,clientId:n.formModel.client_id}),headers:{"Content-Type":"application/json;charset=utf-8","x-api-token":n.formData.token}}).then(function(e){return e.json()}).then(function(e){var n=e.alreadyApplied;return!0===n&&B(),n});case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),n.d(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,null,[[2,8]])}));return function(){return e.apply(this,arguments)}}(),(W=n.document.createElement("button")).style.display="none",W.classList.add("apply-now"),n.document.body.appendChild(W),z=!1,n.document.addEventListener("click",function(){var e=(0,a.Z)(c().mark(function e(t){var r,a,i,o,u,l;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:if(!(r=t.target.closest(g))){e.next=30;break}if(P||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),!z){e.next=7;break}return e.abrupt("return");case 7:if(l=Z===(null===(a=(i=window.DaliaNS).getJobId)||void 0===a?void 0:a.call(i)),J=R(),Z=null===(o=(u=window.DaliaNS).getJobId)||void 0===o?void 0:o.call(u),!J||!Z){e.next=17;break}return e.next=13,G();case 13:if(!e.sent){e.next=17;break}return r.innerText=S,r.setAttribute("disabled","disabled"),e.abrupt("return");case 17:if(N=r,!H.universalSignup||!l){e.next=21;break}return H.universalSignup.toggleOpen(),e.abrupt("return");case 21:return z=!0,n.formsEvent.track("apply_with_dalia_button_click",{params:{jobId:Z,userId:J,clientId:n.formModel.client_id}}),t.target.innerText="Checking job details...",H.universalSignup&&(H.universalSignup.remove(),H.universalSignup=null),e.next=27,M();case 27:F(),z=!1,t.target.innerText=j;case 30:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),!0),e.next=62;break;case 59:e.prev=59,e.t2=e.catch(1),n.d(e.t2);case 62:case"end":return e.stop()}},e,this,[[1,59],[10,21,24,27],[30,36]])})),function(){return n.apply(this,arguments)})}]),e}()}}]);