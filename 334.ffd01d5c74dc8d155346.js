"use strict";(self.webpackChunkmaia_node=self.webpackChunkmaia_node||[]).push([[334],{53334:(t,e,i)=>{i.r(e),i.d(e,{default:()=>S});i(30050),i(59749),i(81919),i(99474),i(35082),i(40739);var n=i(70885),o=i(15861),s=i(4942),r=i(71002),a=i(15671),u=i(43144),l=i(82963),c=i(11752),d=i(61120),h=i(79340),m=i(64687),f=i.n(m),p=(i(30024),i(49693),i(60228),i(47522),i(25728),i(6203),i(69358),i(77049),i(21694),i(50886),i(38077),i(268),i(98742),i(76801),i(43843),i(73964),i(36409),i(89730),i(65007),i(34284),i(41517),i(34338),i(63975),i(86466),i(36585),i(12826),i(55659));function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach(function(e){(0,s.Z)(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(b=function(){return!!t})()}var S=function(t){function e(t){var i,n,o,s,r=t.document,u=t.formRoot,c=t.data;return(0,a.Z)(this,e),n=this,o=e,s=[{document:r,formRoot:u,data:c}],o=(0,d.Z)(o),(i=(0,l.Z)(n,b()?Reflect.construct(o,s||[],(0,d.Z)(n).constructor):o.apply(n,s))).loadCustomFonts(i.formModel.layout.fonts),i.form$(".dalia-forms-container-bg").addEventListener("click",function(){i.data.eapplyFormOptions||i.hideForm()}),i.handleMultipleForms(),i}var i,s,m,v;return(0,h.Z)(e,t),(0,u.Z)(e,[{key:"onFormSubmit",value:function(t){var e,i,n,o=this;if(!t.botDetected&&!this.formNode.classList.contains("hide")){if(this.config.phoneNumberOnlyForm&&!t.data.email&&(t.data.email="phone_only_do_not_email+".concat((new Date).getTime(),"@dalia.co")),this.isEmailInvalid(t.data.email))return this.renderCustomValidation(this.form$('input[type="email"]').parentElement,"Please enter a valid email!");var s=this.form$("input-job-title");if(s&&(this.formValues.job_title=s.querySelector("input[name='job_title']").value),s&&!this.formValues.job_title)return this.customJobTitleValidation("Please provide a valid job title.");var a=this.formNode.querySelector(this.mapboxInputSelector);if(a&&(!this.formValues.location||!a.value))return this.customLocationValidation();this.hide(this.formElementsNode),this.hide(this.footerNode),this.show(this.loadingNode),this.disrubtiveCloseButton.classList.add("d-none");var u=this.form$(".dalia-success img");u&&(u.src=this.formModel.Client.logoUrl),this.form$$(".dalia-logo-image").forEach(function(t){t.src=o.formModel.Client.logoUrl}),this.document.querySelectorAll(".dalia-logo-image").forEach(function(t){t.src=o.formModel.Client.logoUrl});var l=null===(e=this.formModel.layout.components.find(function(t){return"form-header"===t.className}))||void 0===e?void 0:e.content;if(l){var c=document.createElement("div");c.innerHTML=l;var d=c.querySelector("img").getAttribute("src");this.form$(".dalia-success img")&&(this.form$(".dalia-success img").src=d),this.form$$(".dalia-logo-image").forEach(function(t){t.src=d}),this.document.querySelectorAll(".dalia-logo-image").forEach(function(t){t.src=d})}var h=new FormData;if("object"===(0,r.Z)(t.data.job_title)&&null!=t.data.job_title){var m=Object.keys(t.data.job_title).join(",");t.data.job_title=m,this.form.submission.data.job_title=m}var f=this.form$('select[name="data[job_title]"][multiple]');if(null!=f){var v=Array.from(f.options).filter(function(t){return t.selected}).map(function(t){return t.value}).join(",");t.data.job_title=v,this.form.submission.data.job_title=v}Object.keys(t.data).forEach(function(e){var i=t.data[e];e.startsWith("CUSTOM_")&&"object"===(0,r.Z)(i)&&(i=JSON.stringify(i)),h.append("user[".concat(e,"]"),i)}),t.data.job_title&&"object"===(0,r.Z)(t.data.job_title)&&t.data.job_title.join&&h.set("user[job_title]",t.data.job_title.join(",")),this.formValues.forceICIMS&&h.append("forceICIMS",this.formValues.forceICIMS),h.append("client_id",this.formModel.client_id),h.append("client_job_url",this.document.location.href),h.append("form_id",this.formModel.id);var g=null===(i=this.config.postSignupQuestionnaire)||void 0===i?void 0:i.questions.some(function(t){return h.get("user[job_title]").split(",").some(function(e){var i;return null===(i=t.customConditional)||void 0===i||null===(i=i.eq)||void 0===i?void 0:i.includes(e)})});null!==(n=this.config.screeningOut)&&void 0!==n&&n.enabled&&g&&h.append("disable_client_jobs",!0),this.locationBasedOnIP&&h.append("user[location_based_on_ip]",JSON.stringify(this.locationBasedOnIP));if(["resume","city","state","country","location","latitude","longitude","segments"].forEach(function(t){return h.append("user[".concat(t,"]"),o.formValues[t])}),s&&h.append("user[job_title]",this.formValues.job_title),this.invokeCustomCallback("beforeSubmit",t,h),this.submissionData=t.data,this.buttonNode.remove(),this.config.submitForm)return h.append("isScreenedOut",this.shouldScreenOutByDefault()),Formio.fetch(this.config.submitEndPoint,{body:h,method:"POST",mode:"cors"}).then(function(t){return t.json()}).then(function(t){var e,i;o.saveDataAfterSubmit(t),o.hide(o.loadingNode),window.dispatchEvent(new CustomEvent("form-submitted",{detail:{formId:o.formModel.id}}));var n=o.getFilteredPostSignupQuestions();if(o.config.rvp.active&&(null===(e=o.getRVPVariant(o.config.rvp.variants))||void 0===e?void 0:e.id)===p.RvpVariants.SIDEBAR.id){var s=!o.data.lastSubmit;o.successCallBack=function(){o.returnVisitorPersonalization(s),o.successCallBack=null}}null!==(i=o.submissionResponse.hiringEvents)&&void 0!==i&&i.length?o.showHiringEvent(o.submissionResponse.hiringEvents[0]):null!=n&&n.length?o.showPostSignupQuestionnaireQuestions(n):o.handleShowingPageAfterSubmission(),o.saveData(),o.trackSubmitSuccess()}).catch(function(t){console.log(t),o.trackSubmitError(t),o.showSuccess()}).finally(function(){o.formSubmitted=!0})}}},{key:"saveDataAfterSubmit",value:function(t){this.submissionResponse=t,this.data.lastSubmit=this.getTime(),this.data.userName=this.submissionData.first_name,this.data.userId=this.submissionResponse.userID,this.saveData()}},{key:"trackSubmitSuccess",value:function(){this.formsEvent.track("form_submit",{userId:this.submissionResponse.userID,params:{user_signup_date:(new Date).toISOString().slice(0,10)}})}},{key:"trackSubmitError",value:function(t){this.formsEvent.track("form_error",{params:g(g(g({},this.formValues),this.submissionData),{},{error:t})}).catch(function(){})}},{key:"handleShowingPageAfterSubmission",value:function(){var t,e,i,n=null===(t=this.submissionResponse.clientJobs)||void 0===t||null===(t=t.jobs)||void 0===t?void 0:t.length;null===(e=this.config.clientJobsAfterSuccess)||void 0===e||!e.active||n||null!==(i=this.config.screeningOut)&&void 0!==i&&i.enabled||this.formsEvent.track("no_jobs_after_submission",{params:g(g({},this.formValues),{},{client_name:this.formModel.Client.name,clientId:this.formModel.Client.id})}),n?this.showClientJobs(this.submissionResponse.clientJobs):this.showSuccess()}},{key:"showHiringEvent",value:(v=(0,o.Z)(f().mark(function t(e){return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.hiringEventsNode=this.form$(".dalia-hiring-events"),this.show(this.footerNode),this.form$(".dalia-hiring-events .hiring-event__title").innerHTML='\n      <h5 style="font-size: 1rem">Thanks for signing up, register for our upcoming hiring event!</h5>\n    ',this.showHiringEventForm(e),this.hide(this.loadingNode);case 5:case"end":return t.stop()}},t,this)})),function(t){return v.apply(this,arguments)})},{key:"showHiringEventForm",value:function(t){var e=this.document.createElement("div");e.innerHTML=this.getHiringEventsHTML(t),this.form$(".dalia-hiring-events .hiring-event__body").prepend(e),this.form$(".dalia-hiring-events .hiring-event__cto .btn-primary").attachListener("click",this.handleEventSubmit.bind(this,t)),this.form$(".dalia-hiring-events .hiring-event__cto .btn-secondary").attachListener("click",this.handleEventSubmit.bind(this,t,!1)),this.show(this.hiringEventsNode),this.formsEvent.track("hiring_events_loaded",{params:g({},t)})}},{key:"canLoad",value:function(){return!!(0,c.Z)((0,d.Z)(e.prototype),"canLoad",this).call(this)&&!(["exit","universal"].includes(this.formData.formType)&&this.data.lastSubmit+this.config.blockAfterSignup>this.getTime())}},{key:"handleMultipleForms",value:function(){var t=this;window.addEventListener("form-submitted",function(e){e.detail.formId!==t.formModel.id&&(t.syncDataBetweenForms(),t.formNode.classList.add("hide"),t.hide(t.buttonNode))})}},{key:"handleEventSubmit",value:(m=(0,o.Z)(f().mark(function t(e){var i,n,o,s=this,r=arguments;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!(r.length>1&&void 0!==r[1])||r[1],this.hide(this.hiringEventsNode),this.hide(this.footerNode),null!=(n=this.getFilteredPostSignupQuestions())&&n.length?this.showPostSignupQuestionnaireQuestions(n):this.handleShowingPageAfterSubmission(),i){t.next=8;break}return this.formsEvent.track("hiring_events_skipped",{params:g({},e)}),t.abrupt("return");case 8:return this.formsEvent.track("hiring_events_registered",{params:g({},e)}),t.next=11,window.fetch("".concat(this.APIURL,"/users/").concat(this.data.userId,"/hiring-event"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({userId:this.data.userId,eventId:e.eventId,clientId:String(e.clientId)})});case 11:return o=t.sent,t.next=14,o.json().catch(function(t){return s.e("Hiring Event endpoint",t)});case 14:case"end":return t.stop()}},t,this)})),function(t){return m.apply(this,arguments)})},{key:"getHiringEventsHTML",value:function(t){return'\n      <div>\n        <div class="meta">\n        <i class="fa fa-users" aria-hidden="true"></i>\n        <div>\n            <p class="title">'.concat(t.eventCardName,'</p>\n\n          </div>\n        </div>\n        <div class="meta">\n          <i class="fa fa-map-marker" aria-hidden="true"></i>\n          <div>\n            <p class="title">').concat(t.eventCardLocation,'</p>\n\n          </div>\n        </div>\n        <div class="meta">\n          <i class="fa fa-calendar-minus-o" aria-hidden="true"></i>\n          <div>\n            <p class="title">').concat(t.eventCardDate,'</p>\n            <p class="sub-title">').concat(t.eventCardTime,"</p>\n          </div>\n        </div>\n      </div>\n    ")}},{key:"shouldScreenOutClientJobs",value:function(t,e){var i=t.screenOutValues,n=t.type;return!(null==i||!i.length)&&(!("selectboxes"!==n||!i.some(function(t){return!0===e[t]}))||!!i.some(function(t){return t===e}))}},{key:"isEmptyAnswerForPostSignupQuestion",value:function(t){return!t||(Array.isArray(t)?0===t.length:"object"===(0,r.Z)(t)?!Object.values(t).some(function(t){return!!t}):void 0)}},{key:"submitPostSignupQuestionnaire",value:(s=(0,o.Z)(f().mark(function t(e){var i,o,s,r,a,u,l,c,d=this;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return null!==(i=this.config.screeningOut)&&void 0!==i&&i.enabled?this.show(this.loadingNode):this.handleShowingPageAfterSubmission(),this.hide(this.postQuestionnaireNode),s="".concat(this.APIURL,"/users/").concat(this.data.userId,"/post-signup-questionnaire"),r=this.config.postSignupQuestionnaire.questions,this.screenOutPostSignupJobs=!1,a={},Object.entries(null==e?void 0:e.data).map(function(t){var e=(0,n.Z)(t,2),i=e[0],o=e[1],s=r.find(function(t){return t.key===i}),u=s.label;d.isEmptyAnswerForPostSignupQuestion(o)?d.shouldScreenOutByDefault(s)&&(d.screenOutPostSignupJobs=!0):(a[i]={value:o,label:u},d.shouldScreenOutClientJobs(s,o)&&(d.screenOutPostSignupJobs=!0))}),this.formsEvent.track("forms_post_signup_questionnaire_submit_button",{params:{client_name:this.formModel.Client.name}}),this.screenOutPostSignupJobs&&this.formsEvent.track("screenout_no_jobs_after_submission",{params:{client_name:this.formModel.Client.name}}),u={questionsWithAnswers:a,isScreenedOut:(null===(o=this.config.screeningOut)||void 0===o?void 0:o.enabled)&&this.screenOutPostSignupJobs,clientId:this.formModel.Client.id,formId:this.formModel.id},this.isPostSingupQuestionsSubmitted=!0,t.next=13,Formio.fetch(s,{body:JSON.stringify(u),method:"POST",mode:"cors",headers:{"content-type":"application/json"}});case 13:return(l=t.sent).ok||this.handleShowingPageAfterSubmission(),t.next=17,l.json();case 17:c=t.sent,this.submissionResponse=g(g({},this.submissionResponse),c),this.handleShowingPageAfterSubmission();case 20:case"end":return t.stop()}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"shouldShowQuestion",value:function(t){var e=this.submissionData[t.customConditional.when].toLowerCase();return!!t.customConditional.eq.toString().toLowerCase().split("/").some(function(t){return e===t})}},{key:"getFilteredPostSignupQuestions",value:function(){var t=this,e=this.config.postSignupQuestionnaire,i=e.active,n=e.questions;return i?n.filter(function(e){var i=e.customConditional,o=e.conditional;return i?!!t.shouldShowQuestion(e):!o||!!n.find(function(e){return e.key===o.when&&(!e.customConditional||t.shouldShowQuestion(e))})}):[]}},{key:"showPostSignupQuestionnaireQuestions",value:function(t){var e=this;this.postQuestionnaireNode=this.form$(".post-signup-questionnaire"),this.show(this.postQuestionnaireNode);var i=this.form$(".questionnaire-form");t.push({type:"button",action:"submit",label:"Submit",theme:"primary",disableOnInvalid:!0,input:!1});var n=t.map(function(t,e){return"button"===t.type?t:"select"===t.type?g(g({},t),{},{label:"".concat(e+1,". ").concat(t.label),lazyLoad:!1}):g(g({},t),{},{label:"".concat(e+1,". ").concat(t.label)})});Formio.createForm(i,{components:n}).then(function(t){t.on("submit",e.submitPostSignupQuestionnaire.bind(e)),t.on("change",function(){e.IsPostSignupEventLogged||(e.formsEvent.track("forms_post_signup_questionnaire_started",{params:{client_name:e.formModel.Client.name}}),e.IsPostSignupEventLogged=!0)})}),this.form$(".post-signup-questionnaire button.skip").addEventListener("click",(0,o.Z)(f().mark(function t(){return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.hide(e.postQuestionnaireNode),t.next=3,e.handleSkippingPostSignupQuestions();case 3:e.handleShowingPageAfterSubmission(),e.formsEvent.track("forms_post_signup_questionnaire_skip_button",{params:{client_name:e.formModel.Client.name}});case 5:case"end":return t.stop()}},t)})))}},{key:"createForm",value:(i=(0,o.Z)(f().mark(function t(){var i=this;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.Z)((0,d.Z)(e.prototype),"createForm",this).call(this,this.document,this.data);case 2:this.form$(".google-btn")&&this.loadScript("https://accounts.google.com/gsi/client?hl=en").then(function(){i.initGoogleSingInButton()}),this.loadCustomEvents();case 4:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)})},{key:"loadCustomEvents",value:function(){var t=this;["gotoNextPage"].forEach(function(e){t.form.on(e,t[e].bind(t))})}},{key:"gotoNextPage",value:function(){this.form.nextPage()}},{key:"customLocationValidation",value:function(){var t=this.form$(".dalia-forms-location");return t.querySelector(this.mapboxInputSelector).value?this.renderCustomValidation(t,"Location is invalid"):this.renderCustomValidation(t,"Location is required")}},{key:"shouldScreenOutByDefault",value:function(t){var e,i=this.config.screeningOut;return!(null==i||!i.enabled||i.optional)&&(null!=t?!(null===(e=t.screenOutValues)||void 0===e||!e.length):this.getFilteredPostSignupQuestions().some(function(t){var e;return null===(e=t.screenOutValues)||void 0===e?void 0:e.length}))}}]),e}(p.default)},99455:(t,e,i)=>{var n=i(68844),o=i(3689),s=i(77254).start,r=RangeError,a=isFinite,u=Math.abs,l=Date.prototype,c=l.toISOString,d=n(l.getTime),h=n(l.getUTCDate),m=n(l.getUTCFullYear),f=n(l.getUTCHours),p=n(l.getUTCMilliseconds),v=n(l.getUTCMinutes),g=n(l.getUTCMonth),b=n(l.getUTCSeconds);t.exports=o(function(){return"0385-07-25T07:06:39.999Z"!==c.call(new Date(-50000000000001))})||!o(function(){c.call(new Date(NaN))})?function(){if(!a(d(this)))throw new r("Invalid time value");var t=this,e=m(t),i=p(t),n=e<0?"-":e>9999?"+":"";return n+s(u(e),n?6:4,0)+"-"+s(g(t)+1,2,0)+"-"+s(h(t),2,0)+"T"+s(f(t),2,0)+":"+s(v(t),2,0)+":"+s(b(t),2,0)+"."+s(i,3,0)+"Z"}:c},65007:(t,e,i)=>{var n=i(79989),o=i(99455);n({target:"Date",proto:!0,forced:Date.prototype.toISOString!==o},{toISOString:o})},86466:(t,e,i)=>{var n=i(79989),o=i(49419).values;n({target:"Object",stat:!0},{values:function(t){return o(t)}})}}]);